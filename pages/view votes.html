<!DOCTYPE html>
<html lang="en">
    <title>E-Voting System</title>
        
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Votes</title>
</head>
<body>
    <h1>View Votes</h1>
    <div id="voteData">
        <!-- Vote data will be displayed here -->
    </div>
<link rel="stylesheet" href="../style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    
    <script>
        function displayVotes() {
            var votesCookie = getCookieData("CrispBiscuit"); // Change to match your cookie name
            var votedCookie = getCookieData("BakedWafers"); // Change to match your cookie name

            if (votesCookie) {
                var votes = JSON.parse(votesCookie);
                var voted = JSON.parse(votedCookie);

                // Displaying vote data
                var voteDataDiv = document.getElementById("voteData");
                var html = "<h2>Votes</h2>";
                
                for (var i = 0; i < votes.length; i++) {
                    html += "<p>Candidate " + (i + 1) + " votes: " + votes[i].join(', ') + "</p>";
                    html += "<p>Voted status: " + (voted[i] ? "Yes" : "No") + "</p>";
                }

                voteDataDiv.innerHTML = html;
            } else {
                voteDataDiv.innerHTML = "<p>No vote data found.</p>";
            }
        }

        function getCookieData(cookieName) {
            var decodedCookie = decodeURIComponent(document.cookie);
            var cookieArray = decodedCookie.split(";");

            for (var i = 0; i < cookieArray.length; i++) {
                var cookie = cookieArray[i].trim();
                if (cookie.indexOf(cookieName + "=") === 0) {
                    var cookieValue = cookie.slice(cookieName.length + 1);
                    return cookieValue;
                }
            }
            return null;
        }

        // Call displayVotes when the page loads
        displayVotes();
    </script>
    <a href="../index.html"><button class="toggle-button">Home</button></a>
</body>
</html>
